<template name="contactList">

    {{#unless loggingIn}} {{! Help avoid initial flashing when Meteor hasn't logged user in yet }}

        {{#if userEmailIsVerified}}

            <button id="showAddNewContactModal" type="button" class="btn btn-primary">Add New Contact</button>

            <input id="applyFilter" type="text" placeholder="Filter by tag"><button id="applyFilterButton">Apply</button>

            <ul class="list-group">
                {{#each contactList}}
                    <li id="{{email}}" class="list-group-item">Name: {{name}} | Email: {{email}} | Tags: {{tags}} |
                        <button class="btn btn-primary btn-xs sendMessageButton">Send Message</button>
                    </li>
                {{/each}}
            </ul>


            <!-- Modal for adding new contact -->
            <div class="modal fade" id="addNewContact" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="addNewContactLabel">Add New Contact</h4>
                        </div>
                        <div class="modal-body">

                            <form id="addNewContactForm" class="form-horizontal" role="form">

                                <div class="form-group">
                                    <label for="emailInput" class="col-sm-2 control-label">Email</label>
                                    <div class="col-sm-7">
                                        <input type="email" class="form-control" id="emailInput" placeholder="" required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="nameInput" class="col-sm-2 control-label">Name</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" id="nameInput" placeholder="" required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="tagInput" class="col-sm-2 control-label">Tags</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" id="tagInput" placeholder="Separate tags by comma">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div id="addNewContactError" class="alert alert-danger"></div>
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End modal for adding new contact -->



            <!-- Modal for 'sending' email -->
            <div class="modal fade" id="sendMessage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title" id="sendMessageLabel">Send Message</h4>
                        </div>
                        <div class="modal-body">

                            <form id="sendMessageForm" class="form-horizontal" role="form">

                                <div class="form-group">
                                    <label class="col-sm-2 control-label">To</label>
                                    <div class="col-sm-7">
                                        <p id="receiverAddress" class="form-control-static"></p>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="subjectInput" class="col-sm-2 control-label">Subject</label>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" id="subjectInput" placeholder="" required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="bodyInput" class="col-sm-2 control-label">Body</label>
                                    <div class="col-sm-7">
                                        <textarea class="form-control" id="bodyInput" placeholder="" required></textarea>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Send</button>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End modal for 'sending' email -->

        {{else}}

            <p>Sorry, you need to login with a verified email before continue.</p>

        {{/if}}

    {{/unless}}

</template>